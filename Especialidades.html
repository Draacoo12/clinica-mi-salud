<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Especialidades - Cl칤nica Mi Salud</title>
  <link href="css/Css.css" rel="stylesheet" type="text/css"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>

  <header>
    <img src="imagenes/logo.png" alt="Logo Cl칤nica Mi Salud" class="logo"/>
    <nav>
      <ul>
        <li><a href="index.html">Inicio</a></li>
        <li><a href="Especialidades.html" class="activo">Especialidades</a></li> 
        <li><a href="Servicios.html">Servicios</a></li>
        <li><a href="Sedes.html">Sedes</a></li>
        <li><a href="Contacto.html">Contacto</a></li>
        <li id="nav-reserva" style="display: none;"><a href="Reserva.html">Reservar Cita</a></li>
      </ul>
    </nav>
    <div id="user-area"></div>
  </header>

  <section class="contenedor especialidades">
    <h2>Nuestras Especialidades M칠dicas</h2>
    
    <div style="text-align: center; margin-bottom: 30px;">
        <input type="text" id="buscador" placeholder="游댌 Buscar especialidad (ej. Cardiolog칤a)..." 
               style="padding: 12px; width: 90%; max-width: 400px; border-radius: 25px; border: 1px solid #ccc; outline: none; font-size: 16px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
    </div>

    <div class="grid-especialidades" id="lista-especialidades"></div>
  </section>

  <footer>
    <p>춸 2025 Cl칤nica Mi Salud | Todos los derechos reservados</p>
  </footer>

  <div id="modal-login" class="popup">
    <div class="popup-contenido" style="max-width: 380px; text-align: center;">
        <span class="close-modal" style="float:right; cursor:pointer; font-size:28px; color:#333; position:relative; z-index:10;">&times;</span>
        
        <div style="background: #e3f2fd; width: 60px; height: 60px; border-radius: 50%; display:flex; align-items:center; justify-content:center; margin: 0 auto 15px auto;">
            <i class="fas fa-user-circle" style="font-size: 30px; color: var(--primary);"></i>
        </div>

        <h2 style="margin-top:0; color: var(--primary);">Bienvenido</h2>
        <p style="color:#666; font-size:14px; margin-bottom:20px;">Ingresa tus credenciales</p>
        
        <div class="input-group">
            <i class="fas fa-user input-icon"></i>
            <input id="login-usuario" placeholder="Usuario">
        </div>
        <div class="input-group">
            <i class="fas fa-lock input-icon"></i>
            <input id="login-password" type="password" placeholder="Contrase침a">
        </div>
        
        <div id="login-msg"></div> 
        
        <button class="btn btn-gradient" id="btn-login">INGRESAR</button>
        <div class="separator">o</div>
        <button class="btn btn-outline" id="btn-login-admin">Soy Administrador</button>
        
        <div style="margin-top:20px;">
            <small>쯅o tienes cuenta? <a href="#" onclick="switchModal('register')" class="link-action">Reg칤strate gratis</a></small>
        </div>
    </div>
  </div>

  <div id="modal-register" class="popup">
    <div class="popup-contenido" style="max-width: 450px; text-align: center;">
        <span class="close-modal" style="float:right; cursor:pointer; font-size:28px; color:#333; position:relative; z-index:10;">&times;</span>
        
        <div style="background: #e3f2fd; width: 60px; height: 60px; border-radius: 50%; display:flex; align-items:center; justify-content:center; margin: 0 auto 15px auto;">
            <i class="fas fa-user-plus" style="font-size: 28px; color: var(--primary);"></i>
        </div>

        <h2 style="margin-top:0; color: var(--primary);">Crear Cuenta</h2>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
            <div class="input-group">
                <i class="fas fa-id-card input-icon"></i>
                <input id="reg-dni" placeholder="DNI (8 d칤gitos)" maxlength="8">
            </div>
            <div class="input-group">
                <i class="fas fa-user input-icon"></i>
                <input id="reg-usuario" placeholder="Usuario">
            </div>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
            <div class="input-group">
                <i class="fas fa-id-badge input-icon"></i>
                <input id="reg-nombre" placeholder="Nombre">
            </div>
            <div class="input-group">
                <i class="fas fa-id-badge input-icon"></i>
                <input id="reg-apellido" placeholder="Apellido">
            </div>
        </div>

        <div class="input-group">
            <i class="fas fa-lock input-icon"></i>
            <input id="reg-password" type="password" placeholder="Contrase침a">
        </div>
        <div class="input-group">
            <i class="fas fa-lock input-icon"></i>
            <input id="reg-password2" type="password" placeholder="Repetir Contrase침a">
        </div>
        
        <div class="checkbox-wrapper"> 
            <input type="checkbox" id="reg-is-admin"> 
            <label for="reg-is-admin" style="cursor:pointer;">Crear como Administrador</label>
        </div>

        <div id="admin-code-container" class="input-group" style="display:none; background:#f0f8ff; border: 1px dashed #0077b6;">
            <i class="fas fa-key input-icon" style="color:#0077b6;"></i>
            <input id="reg-admin-code" type="password" placeholder="Clave Maestra (Ej: CLINICA2025)" style="background:transparent; border:none;">
        </div>

        <div id="register-msg"></div> 
        <button class="btn btn-gradient" id="btn-registrar">CREAR CUENTA</button>

        <div style="margin-top:20px;">
            <small>쯏a tienes cuenta? <a href="#" onclick="switchModal('login')" class="link-action">Inicia sesi칩n</a></small>
        </div>
    </div>
  </div>

  <script src="js/dataloader.js"></script>
  <script src="js/login.js"></script>
  
  <script>
      /* SCRIPT LOCAL PARA FILTRADO */
      document.addEventListener("DOMContentLoaded", () => {
         const buscador = document.getElementById("buscador");
         const contenedor = document.getElementById("lista-especialidades");
         
         // 1. Obtener datos (El dataloader.js ya debe haber actualizado las imagenes)
         let especialidades = JSON.parse(localStorage.getItem("especialidades"));

         // 2. Funci칩n Renderizar
         function renderizar(filtro = "") {
             contenedor.innerHTML = "";
             const texto = filtro.toLowerCase();

             const filtradas = especialidades.filter(e => 
                 e.nombre.toLowerCase().includes(texto) || 
                 e.descripcion.toLowerCase().includes(texto)
             );

             if (filtradas.length === 0) {
                 contenedor.innerHTML = "<p style='grid-column: 1/-1; text-align: center;'>No se encontraron resultados.</p>";
                 return;
             }

             filtradas.forEach(e => {
                 const card = document.createElement("div");
                 card.className = "card hover-effect"; 
                 card.innerHTML = `
                   <img src="${e.img}" alt="${e.nombre}" style="width:100%; height:180px; object-fit:cover; border-radius:5px;" onerror="this.src='https://via.placeholder.com/300x200?text=Error+Carga'">
                   <div style="padding:15px;">
                       <h3>${e.nombre}</h3>
                       <p>${e.descripcion}</p>
                   </div>
                 `;
                 contenedor.appendChild(card);
             });
         }

         buscador.addEventListener("keyup", (e) => { renderizar(e.target.value); });
         renderizar();
      });
  </script>
</body>
</html>